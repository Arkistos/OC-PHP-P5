{% extends "layout.html" %}

{% block title %}{{post.getTitle()}}{% endblock %}

{% block content %}

<div class="news">
	<h1>
		{{ post.getTitle }}
		
	</h1>
	<h2>{{post.getExcerpt}}</h2>
	<em>le {{ post.getUpdatedAt() }}</em>
	<em>par {{post.getAuthor}}</em>
	<p>
		{{ post.getContent() }}
	</p>
</div>

<h2>Commentaires</h2>
{% if user %}
	
<form action="/addComment/{{ post.getId() }}" method="post">
	
	<div>
		<label for="comment">Commentaire</label><br />
		<textarea id="comment" name="comment"></textarea>
	</div>
	<div>
		<input type="submit" />
	</div>
</form>
{% else %}
<a href="/login">Vous devez être connecté pour commenter le post</a>
{% endif %} 
{% for comment in comments %}
<p> <strong>{{ comment.getUser.getFirstname }} {{comment.getUser.getLastname }}</strong> le {{ comment.getCreatedAt }}</p>
<p>{{ comment.getContent }}</p>
{% endfor %}

{% endblock %}